# 자바 CRUD + 파일 입출력 예제 문제

**총점: 100점**

**시험 시간: 120분**

**주의사항:**
- 각 클래스는 독립적인 파일로 작성하세요
- 클래스명과 메서드명은 정확히 지켜주세요
- 컴파일 오류가 발생하면 해당 부분은 0점 처리됩니다
- 파일 입출력 시 예외 처리를 반드시 포함하세요

---

## 문제: 상품 관리 시스템 (CRUD + 파일 입출력)

### 문제 설명

상품 정보를 관리하는 프로그램을 작성하세요. 
사용자가 메뉴를 선택하여 상품을 등록, 조회, 수정, 삭제할 수 있으며, 
모든 데이터는 파일에 저장되고 프로그램 시작 시 자동으로 로드됩니다.

### 요구사항

#### 1. Product 클래스 작성 (20점)

**필드**
- `id` (String): 상품 코드
- `name` (String): 상품명
- `price` (int): 가격
- `stock` (int): 재고 수량

**생성자**
- `Product(String id, String name, int price, int stock)`: 모든 필드를 받는 생성자

**메서드**
- `toString()`: 상품 정보를 문자열로 반환
  - 형식: `"상품코드: id, 상품명: name, 가격: price원, 재고: stock개"`
- `toFileString()`: 파일 저장용 문자열 반환
  - 형식: `"id|name|price|stock"` (파이프(|)로 구분)
- `static Product fromFileString(String line)`: 파일에서 읽은 문자열을 Product 객체로 변환
  - 파이프(|)로 구분된 문자열을 파싱하여 Product 객체 생성
  - 형식이 잘못된 경우 `null` 반환

#### 2. ProductManager 클래스 작성 (80점)

**필드**
- `products` (ArrayList<Product>): 상품 목록
- `filename` (String): 파일명 ("products.txt")

**생성자**
- `ProductManager()`: ArrayList 초기화 및 파일에서 데이터 로드

**메서드**

**파일 입출력 관련 (30점)**
- `void loadFromFile()`: 파일에서 상품 데이터를 읽어서 ArrayList에 추가
  - 파일이 없으면 빈 파일 생성 (처음 실행 시)
  - 각 줄을 읽어서 `Product.fromFileString()`으로 변환
  - 예외 처리: IOException 발생 시 "파일 읽기 오류: [에러 메시지]" 출력
- `void saveToFile()`: ArrayList의 모든 상품을 파일에 저장
  - 각 상품의 `toFileString()` 결과를 파일에 저장
  - 예외 처리: IOException 발생 시 "파일 저장 오류: [에러 메시지]" 출력

**CRUD 기능 (40점)**
- `void addProduct(String id, String name, int price, int stock)`: 상품 추가
  - 중복된 상품 코드가 있으면 "이미 존재하는 상품 코드입니다" 출력 후 return
  - 추가 성공 시 "상품이 등록되었습니다" 출력 및 파일 저장
- `Product findProduct(String id)`: 상품 코드로 상품 찾기
  - 찾으면 Product 객체 반환, 없으면 null 반환
- `boolean updateProduct(String id, String name, int price, int stock)`: 상품 정보 수정
  - 상품 코드로 찾아서 정보 수정
  - 성공 시 true 반환 및 파일 저장, 실패 시 false 반환
- `boolean deleteProduct(String id)`: 상품 삭제
  - 상품 코드로 찾아서 삭제
  - 성공 시 true 반환 및 파일 저장, 실패 시 false 반환
- `void printAllProducts()`: 모든 상품 출력
  - 등록된 상품이 없으면 "등록된 상품이 없습니다" 출력
  - 있으면 모든 상품 정보 출력

**유틸리티 메서드 (10점)**
- `boolean isDuplicateId(String id)`: 상품 코드 중복 확인
  - 중복이면 true, 아니면 false 반환

#### 3. ProductApp 클래스 작성 (메인 클래스)

**메뉴 시스템**
다음 메뉴를 반복해서 표시하고 사용자 입력을 받아 처리:

```
=== 상품 관리 시스템 ===
1. 상품 등록
2. 상품 조회
3. 상품 수정
4. 상품 삭제
5. 전체 조회
6. 종료
선택 > 
```

**메뉴별 기능**
- **1. 상품 등록**: 상품 코드, 상품명, 가격, 재고를 입력받아 등록
- **2. 상품 조회**: 상품 코드를 입력받아 해당 상품 정보 출력 (없으면 "상품을 찾을 수 없습니다")
- **3. 상품 수정**: 상품 코드를 입력받아 해당 상품의 정보 수정 (성공: "수정 완료", 실패: "상품을 찾을 수 없습니다")
- **4. 상품 삭제**: 상품 코드를 입력받아 삭제 (성공: "삭제 완료", 실패: "상품을 찾을 수 없습니다")
- **5. 전체 조회**: 등록된 모든 상품 정보 출력
- **6. 종료**: 파일에 저장하고 프로그램 종료

**예외 처리**
- 메뉴 선택 시 숫자가 아닌 값 입력 시 "숫자만 입력하세요" 출력 후 다시 메뉴 표시
- 잘못된 메뉴 번호 입력 시 "1~6번 중에 선택하세요" 출력
- 가격, 재고 입력 시 숫자가 아닌 값 입력 시 "숫자로 입력하세요" 출력 후 다시 입력

### 실행 결과 예시

**첫 실행 시 (파일이 없는 경우)**
```
=== 상품 관리 시스템 ===
1. 상품 등록
2. 상품 조회
3. 상품 수정
4. 상품 삭제
5. 전체 조회
6. 종료
선택 > 1
상품 코드 입력: P001
상품명 입력: 노트북
가격 입력: 1000000
재고 입력: 10
상품이 등록되었습니다
=== 상품 관리 시스템 ===
1. 상품 등록
2. 상품 조회
3. 상품 수정
4. 상품 삭제
5. 전체 조회
6. 종료
선택 > 5
상품코드: P001, 상품명: 노트북, 가격: 1000000원, 재고: 10개
선택 > 6
프로그램을 종료합니다.
```

**다음 실행 시 (파일이 있는 경우)**
```
(파일에서 데이터 자동 로드)
=== 상품 관리 시스템 ===
1. 상품 등록
2. 상품 조회
3. 상품 수정
4. 상품 삭제
5. 전체 조회
6. 종료
선택 > 5
상품코드: P001, 상품명: 노트북, 가격: 1000000원, 재고: 10개
```

### 파일 형식

**products.txt 파일 내용 예시:**
```
P001|노트북|1000000|10
P002|마우스|25000|50
P003|키보드|80000|30
```

### 채점 기준

| 항목 | 배점 | 평가 내용 |
|------|------|-----------|
| Product 클래스 | 20점 | 필드, 생성자, toString(), toFileString(), fromFileString() 구현 |
| 파일 입출력 | 30점 | loadFromFile(), saveToFile() 정확한 구현 및 예외 처리 |
| CRUD 기능 | 40점 | add, find, update, delete 메서드 정확한 구현 |
| 메뉴 시스템 | 10점 | 메뉴 표시 및 사용자 입력 처리 |
| **총점** | **100점** | |

### 평가 내용

1. **Product 클래스 (20점)**
   - 필드 선언 및 생성자 구현 (5점)
   - toString() 메서드 구현 (5점)
   - toFileString() 메서드 구현 (5점)
   - fromFileString() 정적 메서드 구현 (5점)

2. **파일 입출력 (30점)**
   - loadFromFile() 메서드 구현 (15점)
     - 파일 읽기 로직 (10점)
     - 예외 처리 (5점)
   - saveToFile() 메서드 구현 (15점)
     - 파일 쓰기 로직 (10점)
     - 예외 처리 (5점)

3. **CRUD 기능 (40점)**
   - addProduct() 구현 (10점)
   - findProduct() 구현 (5점)
   - updateProduct() 구현 (10점)
   - deleteProduct() 구현 (10점)
   - printAllProducts() 구현 (5점)

4. **메뉴 시스템 (10점)**
   - 메뉴 반복 표시 (3점)
   - 사용자 입력 처리 (4점)
   - 예외 처리 (3점)

### 제출 방법

1. `Product.java` 파일
2. `ProductManager.java` 파일
3. `ProductApp.java` 파일
4. 실행 결과 스크린샷 또는 텍스트 파일

### 힌트

- `BufferedReader`와 `FileReader`를 사용하여 파일 읽기
- `BufferedWriter`와 `FileWriter`를 사용하여 파일 쓰기
- `try-catch` 블록으로 IOException 처리
- `String.split("\\|")`로 파이프 구분자 분리
- `Integer.parseInt()`로 문자열을 정수로 변환 시 `NumberFormatException` 처리
