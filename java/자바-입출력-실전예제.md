# 자바 입출력(I/O) 실전 예제 가이드

## 목차
1. [입출력 기본 개념](#1-입출력-기본-개념)
2. [표준 입출력 (콘솔)](#2-표준-입출력-콘솔)
3. [파일 입출력](#3-파일-입출력)
4. [실전 예제 모음](#4-실전-예제-모음)

---

## 1. 입출력 기본 개념

### 1.1 입출력이란?

**입출력(Input/Output)**은 프로그램과 외부 환경 간의 데이터 교환입니다.

- **입력(Input)**: 외부에서 프로그램으로 데이터를 가져오기
  - 키보드 입력, 파일 읽기, 네트워크에서 데이터 받기
- **출력(Output)**: 프로그램에서 외부로 데이터를 보내기
  - 화면 출력, 파일 쓰기, 네트워크로 데이터 보내기

### 1.2 스트림(Stream)의 개념

**스트림**은 데이터가 흐르는 통로입니다.

```
[데이터 소스] → [입력 스트림] → [프로그램] → [출력 스트림] → [데이터 목적지]
```

**특징:**
- 단방향: 입력과 출력이 분리됨
- 순차적: 데이터가 순서대로 처리됨
- 연속적: 데이터가 끊임없이 흐름

### 1.3 스트림의 종류

#### 바이트 스트림 (Byte Stream)
- **단위**: 바이트(byte) - 8비트
- **용도**: 이미지, 동영상, 실행 파일 등 바이너리 데이터
- **클래스**: `InputStream`, `OutputStream` 계열

#### 문자 스트림 (Character Stream)
- **단위**: 문자(char) - 16비트 (유니코드)
- **용도**: 텍스트 파일 처리
- **클래스**: `Reader`, `Writer` 계열

---

## 2. 표준 입출력 (콘솔)

### 2.1 System.out (표준 출력)

**콘솔에 출력하기**

```java
// 기본 출력
System.out.print("Hello");        // 줄바꿈 없음
System.out.println("World");      // 줄바꿈 있음
System.out.printf("값: %d", 10);  // 포맷 출력

// 예제
System.out.print("이름: ");
System.out.println("홍길동");
System.out.printf("나이: %d세\n", 20);
System.out.printf("평균: %.2f\n", 85.5);
```

**출력 결과:**
```
이름: 홍길동
나이: 20세
평균: 85.50
```

### 2.2 System.in (표준 입력)

**키보드에서 입력받기**

```java
import java.util.Scanner;

Scanner sc = new Scanner(System.in);

// 정수 입력
System.out.print("정수 입력: ");
int num = sc.nextInt();

// 실수 입력
System.out.print("실수 입력: ");
double d = sc.nextDouble();

// 문자열 입력
System.out.print("이름 입력: ");
String name = sc.next();        // 공백 전까지
String line = sc.nextLine();    // 한 줄 전체

sc.close();  // 사용 후 닫기
```

### 2.3 Scanner 클래스 예제

```java
import java.util.Scanner;

public class ScannerExample {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        
        System.out.print("이름: ");
        String name = sc.next();
        
        System.out.print("나이: ");
        int age = sc.nextInt();
        
        System.out.print("키: ");
        double height = sc.nextDouble();
        
        System.out.println("\n입력된 정보:");
        System.out.println("이름: " + name);
        System.out.println("나이: " + age);
        System.out.println("키: " + height);
        
        sc.close();
    }
}
```

**실행 결과:**
```
이름: 홍길동
나이: 20
키: 175.5

입력된 정보:
이름: 홍길동
나이: 20
키: 175.5
```

---

## 3. 파일 입출력

### 3.1 File 클래스

**파일 정보 확인 및 관리**

```java
import java.io.File;

public class FileExample {
    public static void main(String[] args) {
        File file = new File("data.txt");
        
        // 파일 존재 확인
        if (file.exists()) {
            System.out.println("파일이 존재합니다.");
            System.out.println("파일명: " + file.getName());
            System.out.println("절대 경로: " + file.getAbsolutePath());
            System.out.println("파일 크기: " + file.length() + " bytes");
            System.out.println("읽기 가능: " + file.canRead());
            System.out.println("쓰기 가능: " + file.canWrite());
        } else {
            System.out.println("파일이 존재하지 않습니다.");
        }
        
        // 파일 생성
        try {
            if (file.createNewFile()) {
                System.out.println("파일이 생성되었습니다.");
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        
        // 파일 삭제
        if (file.delete()) {
            System.out.println("파일이 삭제되었습니다.");
        }
    }
}
```

### 3.2 문자 스트림 - FileReader / FileWriter

**텍스트 파일 읽기 (FileReader)**

```java
import java.io.FileReader;
import java.io.IOException;

public class FileReadExample {
    public static void main(String[] args) {
        // 방법 1: try-with-resources (권장)
        try (FileReader fr = new FileReader("data.txt")) {
            int data;
            while ((data = fr.read()) != -1) {
                System.out.print((char) data);
            }
        } catch (IOException e) {
            System.out.println("파일 읽기 오류: " + e.getMessage());
        }
        
        // 방법 2: 수동 close (비권장)
        FileReader fr = null;
        try {
            fr = new FileReader("data.txt");
            int data;
            while ((data = fr.read()) != -1) {
                System.out.print((char) data);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (fr != null) {
                try {
                    fr.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}
```

**텍스트 파일 쓰기 (FileWriter)**

```java
import java.io.FileWriter;
import java.io.IOException;

public class FileWriteExample {
    public static void main(String[] args) {
        // 덮어쓰기 모드
        try (FileWriter fw = new FileWriter("output.txt")) {
            fw.write("첫 번째 줄\n");
            fw.write("두 번째 줄\n");
            System.out.println("파일 쓰기 완료");
        } catch (IOException e) {
            System.out.println("파일 쓰기 오류: " + e.getMessage());
        }
        
        // 추가 모드 (append)
        try (FileWriter fw = new FileWriter("output.txt", true)) {
            fw.write("추가되는 줄\n");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

### 3.3 BufferedReader / BufferedWriter

**효율적인 텍스트 파일 읽기 (BufferedReader)**

```java
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class BufferedReaderExample {
    public static void main(String[] args) {
        try (BufferedReader br = new BufferedReader(
                new FileReader("data.txt"))) {
            
            String line;
            int lineNumber = 1;
            
            // 한 줄씩 읽기
            while ((line = br.readLine()) != null) {
                System.out.println(lineNumber + ": " + line);
                lineNumber++;
            }
        } catch (IOException e) {
            System.out.println("파일 읽기 오류: " + e.getMessage());
        }
    }
}
```

**효율적인 텍스트 파일 쓰기 (BufferedWriter)**

```java
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;

public class BufferedWriterExample {
    public static void main(String[] args) {
        try (BufferedWriter bw = new BufferedWriter(
                new FileWriter("output.txt"))) {
            
            bw.write("첫 번째 줄");
            bw.newLine();  // 줄바꿈 (플랫폼 독립적)
            bw.write("두 번째 줄");
            bw.newLine();
            bw.write("세 번째 줄");
            
            System.out.println("파일 쓰기 완료");
        } catch (IOException e) {
            System.out.println("파일 쓰기 오류: " + e.getMessage());
        }
    }
}
```

### 3.4 바이트 스트림 - FileInputStream / FileOutputStream

**바이너리 파일 읽기 (FileInputStream)**

```java
import java.io.FileInputStream;
import java.io.IOException;

public class FileInputStreamExample {
    public static void main(String[] args) {
        try (FileInputStream fis = new FileInputStream("data.bin")) {
            int data;
            while ((data = fis.read()) != -1) {
                System.out.print(data + " ");
            }
        } catch (IOException e) {
            System.out.println("파일 읽기 오류: " + e.getMessage());
        }
    }
}
```

**바이너리 파일 쓰기 (FileOutputStream)**

```java
import java.io.FileOutputStream;
import java.io.IOException;

public class FileOutputStreamExample {
    public static void main(String[] args) {
        try (FileOutputStream fos = new FileOutputStream("output.bin")) {
            byte[] data = {65, 66, 67, 68, 69};  // A, B, C, D, E
            fos.write(data);
            System.out.println("파일 쓰기 완료");
        } catch (IOException e) {
            System.out.println("파일 쓰기 오류: " + e.getMessage());
        }
    }
}
```

---

## 4. 실전 예제 모음

### 예제 1: 학생 정보 파일 저장 및 읽기

```java
import java.io.*;
import java.util.ArrayList;
import java.util.Scanner;

class Student {
    private String name;
    private int age;
    private String major;
    
    public Student(String name, int age, String major) {
        this.name = name;
        this.age = age;
        this.major = major;
    }
    
    // 파일 저장용 문자열
    public String toFileString() {
        return name + "|" + age + "|" + major;
    }
    
    // 파일에서 읽은 문자열로 객체 생성
    public static Student fromFileString(String line) {
        String[] parts = line.split("\\|");
        if (parts.length == 3) {
            return new Student(parts[0], 
                             Integer.parseInt(parts[1]), 
                             parts[2]);
        }
        return null;
    }
    
    @Override
    public String toString() {
        return "이름: " + name + ", 나이: " + age + ", 전공: " + major;
    }
    
    // Getter
    public String getName() { return name; }
    public int getAge() { return age; }
    public String getMajor() { return major; }
}

public class StudentFileManager {
    private static final String FILENAME = "students.txt";
    
    // 학생 정보를 파일에 저장
    public static void saveStudents(ArrayList<Student> students) {
        try (BufferedWriter bw = new BufferedWriter(
                new FileWriter(FILENAME))) {
            
            for (Student student : students) {
                bw.write(student.toFileString());
                bw.newLine();
            }
            System.out.println("파일 저장 완료!");
        } catch (IOException e) {
            System.out.println("파일 저장 오류: " + e.getMessage());
        }
    }
    
    // 파일에서 학생 정보 읽기
    public static ArrayList<Student> loadStudents() {
        ArrayList<Student> students = new ArrayList<>();
        
        try (BufferedReader br = new BufferedReader(
                new FileReader(FILENAME))) {
            
            String line;
            while ((line = br.readLine()) != null) {
                line = line.trim();
                if (!line.isEmpty()) {
                    Student student = Student.fromFileString(line);
                    if (student != null) {
                        students.add(student);
                    }
                }
            }
            System.out.println("파일 읽기 완료!");
        } catch (FileNotFoundException e) {
            System.out.println("파일이 없습니다. 새로 생성합니다.");
        } catch (IOException e) {
            System.out.println("파일 읽기 오류: " + e.getMessage());
        }
        
        return students;
    }
    
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        ArrayList<Student> students = loadStudents();
        
        while (true) {
            System.out.println("\n=== 학생 관리 시스템 ===");
            System.out.println("1. 학생 추가");
            System.out.println("2. 학생 목록");
            System.out.println("3. 파일 저장");
            System.out.println("4. 종료");
            System.out.print("선택 > ");
            
            int choice = sc.nextInt();
            sc.nextLine();  // 버퍼 비우기
            
            switch (choice) {
                case 1:
                    System.out.print("이름: ");
                    String name = sc.nextLine();
                    System.out.print("나이: ");
                    int age = sc.nextInt();
                    sc.nextLine();
                    System.out.print("전공: ");
                    String major = sc.nextLine();
                    
                    students.add(new Student(name, age, major));
                    System.out.println("학생이 추가되었습니다.");
                    break;
                    
                case 2:
                    if (students.isEmpty()) {
                        System.out.println("등록된 학생이 없습니다.");
                    } else {
                        System.out.println("\n=== 학생 목록 ===");
                        for (int i = 0; i < students.size(); i++) {
                            System.out.println((i + 1) + ". " + students.get(i));
                        }
                    }
                    break;
                    
                case 3:
                    saveStudents(students);
                    break;
                    
                case 4:
                    System.out.println("프로그램을 종료합니다.");
                    sc.close();
                    return;
                    
                default:
                    System.out.println("잘못된 선택입니다.");
            }
        }
    }
}
```

### 예제 2: 로그 파일 작성기

```java
import java.io.*;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;

public class Logger {
    private static final String LOG_FILE = "app.log";
    private static final DateTimeFormatter FORMATTER = 
        DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss");
    
    // 로그 기록
    public static void log(String level, String message) {
        try (BufferedWriter bw = new BufferedWriter(
                new FileWriter(LOG_FILE, true))) {
            
            String timestamp = LocalDateTime.now().format(FORMATTER);
            String logEntry = String.format("[%s] [%s] %s", 
                                           timestamp, level, message);
            
            bw.write(logEntry);
            bw.newLine();
            bw.flush();  // 즉시 파일에 쓰기
            
        } catch (IOException e) {
            System.err.println("로그 기록 오류: " + e.getMessage());
        }
    }
    
    // 편의 메서드
    public static void info(String message) {
        log("INFO", message);
    }
    
    public static void error(String message) {
        log("ERROR", message);
    }
    
    public static void warning(String message) {
        log("WARNING", message);
    }
    
    // 로그 파일 읽기
    public static void readLogs() {
        try (BufferedReader br = new BufferedReader(
                new FileReader(LOG_FILE))) {
            
            System.out.println("=== 로그 파일 내용 ===");
            String line;
            while ((line = br.readLine()) != null) {
                System.out.println(line);
            }
        } catch (IOException e) {
            System.out.println("로그 파일 읽기 오류: " + e.getMessage());
        }
    }
    
    public static void main(String[] args) {
        info("프로그램 시작");
        info("사용자 로그인: 홍길동");
        warning("메모리 사용량이 높습니다: 85%");
        info("데이터 처리 완료");
        error("파일을 찾을 수 없습니다: data.txt");
        info("프로그램 종료");
        
        readLogs();
    }
}
```

### 예제 3: 파일 복사 프로그램

```java
import java.io.*;

public class FileCopy {
    // 텍스트 파일 복사 (문자 스트림)
    public static void copyTextFile(String source, String destination) {
        try (BufferedReader br = new BufferedReader(
                new FileReader(source));
             BufferedWriter bw = new BufferedWriter(
                new FileWriter(destination))) {
            
            String line;
            int lineCount = 0;
            
            while ((line = br.readLine()) != null) {
                bw.write(line);
                bw.newLine();
                lineCount++;
            }
            
            System.out.println("파일 복사 완료! (" + lineCount + "줄)");
        } catch (IOException e) {
            System.out.println("파일 복사 오류: " + e.getMessage());
        }
    }
    
    // 바이너리 파일 복사 (바이트 스트림)
    public static void copyBinaryFile(String source, String destination) {
        try (BufferedInputStream bis = new BufferedInputStream(
                new FileInputStream(source));
             BufferedOutputStream bos = new BufferedOutputStream(
                new FileOutputStream(destination))) {
            
            byte[] buffer = new byte[1024];  // 1KB 버퍼
            int bytesRead;
            long totalBytes = 0;
            
            while ((bytesRead = bis.read(buffer)) != -1) {
                bos.write(buffer, 0, bytesRead);
                totalBytes += bytesRead;
            }
            
            System.out.println("파일 복사 완료! (" + totalBytes + " bytes)");
        } catch (IOException e) {
            System.out.println("파일 복사 오류: " + e.getMessage());
        }
    }
    
    public static void main(String[] args) {
        // 텍스트 파일 복사
        copyTextFile("source.txt", "destination.txt");
        
        // 바이너리 파일 복사
        copyBinaryFile("image.jpg", "image_copy.jpg");
    }
}
```

### 예제 4: 설정 파일 읽기/쓰기

```java
import java.io.*;
import java.util.HashMap;
import java.util.Map;

public class ConfigManager {
    private Map<String, String> config;
    private String filename;
    
    public ConfigManager(String filename) {
        this.filename = filename;
        this.config = new HashMap<>();
        loadConfig();
    }
    
    // 설정 파일 읽기 (형식: key=value)
    public void loadConfig() {
        File file = new File(filename);
        if (!file.exists()) {
            System.out.println("설정 파일이 없습니다. 기본값을 사용합니다.");
            return;
        }
        
        try (BufferedReader br = new BufferedReader(
                new FileReader(filename))) {
            
            String line;
            while ((line = br.readLine()) != null) {
                line = line.trim();
                // 주석 무시
                if (line.startsWith("#") || line.isEmpty()) {
                    continue;
                }
                
                // key=value 형식 파싱
                int index = line.indexOf('=');
                if (index > 0) {
                    String key = line.substring(0, index).trim();
                    String value = line.substring(index + 1).trim();
                    config.put(key, value);
                }
            }
            System.out.println("설정 파일 로드 완료!");
        } catch (IOException e) {
            System.out.println("설정 파일 읽기 오류: " + e.getMessage());
        }
    }
    
    // 설정 파일 저장
    public void saveConfig() {
        try (BufferedWriter bw = new BufferedWriter(
                new FileWriter(filename))) {
            
            bw.write("# 설정 파일");
            bw.newLine();
            bw.write("# 형식: key=value");
            bw.newLine();
            bw.newLine();
            
            for (Map.Entry<String, String> entry : config.entrySet()) {
                bw.write(entry.getKey() + "=" + entry.getValue());
                bw.newLine();
            }
            
            System.out.println("설정 파일 저장 완료!");
        } catch (IOException e) {
            System.out.println("설정 파일 저장 오류: " + e.getMessage());
        }
    }
    
    // 설정 값 가져오기
    public String get(String key) {
        return config.getOrDefault(key, "");
    }
    
    // 설정 값 설정하기
    public void set(String key, String value) {
        config.put(key, value);
    }
    
    // 모든 설정 출력
    public void printAll() {
        System.out.println("\n=== 현재 설정 ===");
        for (Map.Entry<String, String> entry : config.entrySet()) {
            System.out.println(entry.getKey() + " = " + entry.getValue());
        }
    }
    
    public static void main(String[] args) {
        ConfigManager config = new ConfigManager("config.txt");
        
        // 설정 값 설정
        config.set("server", "localhost");
        config.set("port", "8080");
        config.set("database", "mydb");
        config.set("username", "admin");
        
        // 설정 저장
        config.saveConfig();
        
        // 설정 읽기
        config.printAll();
        
        // 특정 값 가져오기
        System.out.println("\n서버: " + config.get("server"));
        System.out.println("포트: " + config.get("port"));
    }
}
```

**config.txt 파일 내용:**
```
# 설정 파일
# 형식: key=value

server=localhost
port=8080
database=mydb
username=admin
```

### 예제 5: CSV 파일 읽기/쓰기

```java
import java.io.*;
import java.util.ArrayList;

public class CSVManager {
    // CSV 파일 읽기
    public static ArrayList<String[]> readCSV(String filename) {
        ArrayList<String[]> data = new ArrayList<>();
        
        try (BufferedReader br = new BufferedReader(
                new FileReader(filename))) {
            
            String line;
            while ((line = br.readLine()) != null) {
                // 쉼표로 분리
                String[] fields = line.split(",");
                data.add(fields);
            }
        } catch (IOException e) {
            System.out.println("CSV 파일 읽기 오류: " + e.getMessage());
        }
        
        return data;
    }
    
    // CSV 파일 쓰기
    public static void writeCSV(String filename, ArrayList<String[]> data) {
        try (BufferedWriter bw = new BufferedWriter(
                new FileWriter(filename))) {
            
            for (String[] row : data) {
                // 쉼표로 연결
                String line = String.join(",", row);
                bw.write(line);
                bw.newLine();
            }
            
            System.out.println("CSV 파일 저장 완료!");
        } catch (IOException e) {
            System.out.println("CSV 파일 쓰기 오류: " + e.getMessage());
        }
    }
    
    public static void main(String[] args) {
        // CSV 파일 쓰기
        ArrayList<String[]> data = new ArrayList<>();
        data.add(new String[]{"이름", "나이", "직업"});
        data.add(new String[]{"홍길동", "30", "개발자"});
        data.add(new String[]{"김철수", "25", "디자이너"});
        data.add(new String[]{"이영희", "28", "기획자"});
        
        writeCSV("employees.csv", data);
        
        // CSV 파일 읽기
        ArrayList<String[]> loaded = readCSV("employees.csv");
        System.out.println("\n=== CSV 파일 내용 ===");
        for (String[] row : loaded) {
            for (String field : row) {
                System.out.print(field + "\t");
            }
            System.out.println();
        }
    }
}
```

### 예제 6: 파일 검색 및 통계

```java
import java.io.*;
import java.util.HashMap;
import java.util.Map;

public class FileAnalyzer {
    // 파일의 단어 빈도 분석
    public static Map<String, Integer> analyzeWords(String filename) {
        Map<String, Integer> wordCount = new HashMap<>();
        
        try (BufferedReader br = new BufferedReader(
                new FileReader(filename))) {
            
            String line;
            while ((line = br.readLine()) != null) {
                // 단어로 분리 (공백, 구두점 기준)
                String[] words = line.toLowerCase()
                    .replaceAll("[^가-힣a-zA-Z0-9\\s]", " ")
                    .split("\\s+");
                
                for (String word : words) {
                    if (!word.isEmpty()) {
                        wordCount.put(word, 
                            wordCount.getOrDefault(word, 0) + 1);
                    }
                }
            }
        } catch (IOException e) {
            System.out.println("파일 읽기 오류: " + e.getMessage());
        }
        
        return wordCount;
    }
    
    // 파일 통계 정보
    public static void printFileStats(String filename) {
        File file = new File(filename);
        if (!file.exists()) {
            System.out.println("파일이 존재하지 않습니다.");
            return;
        }
        
        int lineCount = 0;
        int wordCount = 0;
        int charCount = 0;
        
        try (BufferedReader br = new BufferedReader(
                new FileReader(filename))) {
            
            String line;
            while ((line = br.readLine()) != null) {
                lineCount++;
                charCount += line.length();
                wordCount += line.split("\\s+").length;
            }
        } catch (IOException e) {
            System.out.println("파일 읽기 오류: " + e.getMessage());
            return;
        }
        
        System.out.println("=== 파일 통계 ===");
        System.out.println("파일명: " + file.getName());
        System.out.println("파일 크기: " + file.length() + " bytes");
        System.out.println("줄 수: " + lineCount);
        System.out.println("단어 수: " + wordCount);
        System.out.println("문자 수: " + charCount);
    }
    
    public static void main(String[] args) {
        // 파일 통계
        printFileStats("data.txt");
        
        // 단어 빈도 분석
        Map<String, Integer> wordCount = analyzeWords("data.txt");
        System.out.println("\n=== 단어 빈도 ===");
        for (Map.Entry<String, Integer> entry : wordCount.entrySet()) {
            System.out.println(entry.getKey() + ": " + entry.getValue());
        }
    }
}
```

---

## 5. 입출력 메서드 비교표

### 5.1 파일 읽기 방법 비교

| 방법 | 클래스 | 특징 | 사용 시기 |
|------|--------|------|-----------|
| 한 문자씩 | FileReader | 느림, 간단 | 작은 파일 |
| 한 줄씩 | BufferedReader + FileReader | 빠름, 편리 | 텍스트 파일 (권장) |
| 바이트 단위 | FileInputStream | 바이너리 데이터 | 이미지, 동영상 |

### 5.2 파일 쓰기 방법 비교

| 방법 | 클래스 | 특징 | 사용 시기 |
|------|--------|------|-----------|
| 한 문자씩 | FileWriter | 느림, 간단 | 작은 파일 |
| 한 줄씩 | BufferedWriter + FileWriter | 빠름, 편리 | 텍스트 파일 (권장) |
| 바이트 단위 | FileOutputStream | 바이너리 데이터 | 이미지, 동영상 |

---

## 6. 주의사항 및 Best Practice

### 6.1 리소스 관리

**❌ 나쁜 예:**
```java
FileReader fr = new FileReader("data.txt");
// close()를 호출하지 않음 → 리소스 누수
```

**✅ 좋은 예:**
```java
// try-with-resources 사용 (자동으로 close())
try (FileReader fr = new FileReader("data.txt")) {
    // 파일 읽기
}  // 자동으로 close() 호출
```

### 6.2 예외 처리

**항상 IOException 처리:**
```java
try {
    FileReader fr = new FileReader("data.txt");
    // 파일 읽기
} catch (FileNotFoundException e) {
    System.out.println("파일을 찾을 수 없습니다.");
} catch (IOException e) {
    System.out.println("입출력 오류: " + e.getMessage());
}
```

### 6.3 파일 존재 확인

**파일 읽기 전 확인:**
```java
File file = new File("data.txt");
if (file.exists() && file.isFile()) {
    // 파일 읽기
} else {
    System.out.println("파일이 존재하지 않습니다.");
}
```

### 6.4 인코딩 지정

**한글 처리 시 인코딩 지정:**
```java
// UTF-8 인코딩으로 읽기
try (BufferedReader br = new BufferedReader(
        new InputStreamReader(
            new FileInputStream("data.txt"), "UTF-8"))) {
    // 파일 읽기
}

// UTF-8 인코딩으로 쓰기
try (BufferedWriter bw = new BufferedWriter(
        new OutputStreamWriter(
            new FileOutputStream("output.txt"), "UTF-8"))) {
    // 파일 쓰기
}
```

---

## 7. 자주 사용하는 패턴

### 패턴 1: 파일에서 리스트로 읽기

```java
public static ArrayList<String> readLines(String filename) {
    ArrayList<String> lines = new ArrayList<>();
    try (BufferedReader br = new BufferedReader(
            new FileReader(filename))) {
        String line;
        while ((line = br.readLine()) != null) {
            lines.add(line);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    return lines;
}
```

### 패턴 2: 리스트를 파일로 쓰기

```java
public static void writeLines(String filename, ArrayList<String> lines) {
    try (BufferedWriter bw = new BufferedWriter(
            new FileWriter(filename))) {
        for (String line : lines) {
            bw.write(line);
            bw.newLine();
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}
```

### 패턴 3: 파일 추가 모드

```java
// 파일에 내용 추가 (기존 내용 유지)
try (BufferedWriter bw = new BufferedWriter(
        new FileWriter("log.txt", true))) {  // true = append 모드
    bw.write("새로운 로그");
    bw.newLine();
}
```

### 패턴 4: 파일 내용 전체 읽기

```java
public static String readAll(String filename) {
    StringBuilder content = new StringBuilder();
    try (BufferedReader br = new BufferedReader(
            new FileReader(filename))) {
        String line;
        while ((line = br.readLine()) != null) {
            content.append(line).append("\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    return content.toString();
}
```

---

## 8. 연습 문제

### 문제 1: 간단한 메모장 프로그램 (20점)

**문제 설명**
사용자가 입력한 텍스트를 `c:/Users/TJ/out1.txt` 파일에 저장하고 읽는 간단한 메모장 프로그램을 작성하세요.

**요구사항**
1. 메뉴 시스템 구현
   ```
   === 메모장 프로그램 ===
   1. 새 메모 작성
   2. 메모 읽기
   3. 메모 추가
   4. 종료
   선택 > 
   ```

2. 기능 구현
   - **1. 새 메모 작성**: 
     - 여러 줄의 텍스트를 입력받아 `c:/Users/TJ/out1.txt` 파일에 저장
     - 파일이 없으면 새로 생성하고, 있으면 기존 내용을 덮어쓰기
     - 파일 생성/덮어쓰기 여부를 메시지로 출력
   - **2. 메모 읽기**: `c:/Users/TJ/out1.txt` 파일 내용을 출력 (파일이 없으면 "파일이 없습니다" 출력)
   - **3. 메모 추가**: 텍스트를 입력받아 `c:/Users/TJ/out1.txt` 파일에 추가 (기존 내용 유지)
   - **4. 종료**: 프로그램 종료

3. 파일 경로
   - 출력 파일: `c:/Users/TJ/out1.txt` (고정)
   - 디렉토리가 없으면 자동으로 생성해야 함
   - 파일이 없으면 자동으로 생성해야 함

4. 예외 처리
   - 파일 읽기/쓰기 시 IOException 처리
   - 파일이 없을 때 적절한 메시지 출력

**실행 결과 예시**
```
=== 메모장 프로그램 ===
1. 새 메모 작성
2. 메모 읽기
3. 메모 추가
4. 종료
선택 > 1
메모 내용 입력 (종료: 빈 줄 입력):
안녕하세요
자바 파일 입출력 연습입니다.
새 파일을 생성하여 c:/Users/TJ/out1.txt에 저장되었습니다.

=== 메모장 프로그램 ===
1. 새 메모 작성
2. 메모 읽기
3. 메모 추가
4. 종료
선택 > 1
메모 내용 입력 (종료: 빈 줄 입력):
수정된 메모입니다.
기존 파일을 덮어쓰고 c:/Users/TJ/out1.txt에 저장되었습니다.

선택 > 2
=== 메모 내용 ===
수정된 메모입니다.

선택 > 3
추가할 내용 입력 (종료: 빈 줄 입력):
추가 메모입니다.
메모가 c:/Users/TJ/out1.txt에 추가되었습니다.
```

**채점 기준**
- 메뉴 시스템 구현 (5점)
- 파일 쓰기 기능 (5점)
- 파일 읽기 기능 (5점)
- 파일 추가 기능 (3점)
- 예외 처리 (2점)

---

### 문제 2: 학생 성적 관리 프로그램 (25점)

**문제 설명**
학생 이름과 점수를 파일에 저장하고, 평균을 계산하는 프로그램을 작성하세요.

**요구사항**
1. Student 클래스 작성
   - 필드: `name` (String), `score` (int)
   - 생성자, getter, setter
   - `toFileString()`: 파일 저장용 문자열 반환 (형식: "이름|점수")
   - `static Student fromFileString(String line)`: 파일에서 읽은 문자열로 객체 생성

2. 메뉴 시스템
   ```
   === 학생 성적 관리 ===
   1. 학생 추가
   2. 전체 조회
   3. 파일 저장
   4. 파일 불러오기
   5. 평균 계산
   6. 종료
   선택 > 
   ```

3. 기능 구현
   - **1. 학생 추가**: 이름과 점수를 입력받아 ArrayList에 추가
   - **2. 전체 조회**: 등록된 모든 학생 정보 출력
   - **3. 파일 저장**: 모든 학생 정보를 파일에 저장 (students.txt)
   - **4. 파일 불러오기**: 파일에서 학생 정보를 읽어서 ArrayList에 추가
   - **5. 평균 계산**: 모든 학생의 평균 점수 계산 및 출력
   - **6. 종료**: 프로그램 종료

**실행 결과 예시**
```
=== 학생 성적 관리 ===
1. 학생 추가
2. 전체 조회
3. 파일 저장
4. 파일 불러오기
5. 평균 계산
6. 종료
선택 > 1
이름 입력: 홍길동
점수 입력: 85
학생이 추가되었습니다.

선택 > 1
이름 입력: 김철수
점수 입력: 92
학생이 추가되었습니다.

선택 > 2
=== 학생 목록 ===
1. 홍길동: 85점
2. 김철수: 92점

선택 > 5
전체 학생 수: 2명
평균 점수: 88.5점

선택 > 3
파일 저장 완료!
```

**채점 기준**
- Student 클래스 구현 (5점)
- 학생 추가/조회 기능 (5점)
- 파일 저장 기능 (5점)
- 파일 불러오기 기능 (5점)
- 평균 계산 기능 (3점)
- 예외 처리 (2점)

---

### 문제 3: 로그 분석기 (30점)

**문제 설명**
로그 파일에서 특정 키워드를 검색하고 통계를 내는 프로그램을 작성하세요.

**요구사항**
1. 메뉴 시스템
   ```
   === 로그 분석기 ===
   1. 로그 파일 읽기
   2. 키워드 검색
   3. 로그 통계
   4. 종료
   선택 > 
   ```

2. 기능 구현
   - **1. 로그 파일 읽기**: 파일명을 입력받아 로그 파일을 읽고 ArrayList에 저장
   - **2. 키워드 검색**: 검색할 키워드를 입력받아 해당 키워드가 포함된 모든 로그 라인 출력
     - 출력 형식: "[라인번호] 로그 내용"
   - **3. 로그 통계**: 다음 통계 정보 출력
     - 전체 로그 라인 수
     - 각 로그 레벨별 개수 (INFO, ERROR, WARNING 등)
     - 가장 많이 나타나는 단어 Top 5
   - **4. 종료**: 프로그램 종료

3. 로그 파일 형식 예시
   ```
   [2024-01-01 10:00:00] [INFO] 프로그램 시작
   [2024-01-01 10:01:00] [INFO] 사용자 로그인: 홍길동
   [2024-01-01 10:02:00] [ERROR] 파일을 찾을 수 없습니다
   [2024-01-01 10:03:00] [WARNING] 메모리 사용량이 높습니다
   [2024-01-01 10:04:00] [INFO] 데이터 처리 완료
   ```

**실행 결과 예시**
```
=== 로그 분석기 ===
1. 로그 파일 읽기
2. 키워드 검색
3. 로그 통계
4. 종료
선택 > 1
파일명 입력: app.log
로그 파일 읽기 완료! (5줄)

선택 > 2
검색할 키워드 입력: 로그인
=== 검색 결과 ===
[2] [2024-01-01 10:01:00] [INFO] 사용자 로그인: 홍길동

선택 > 3
=== 로그 통계 ===
전체 로그 라인 수: 5
[INFO]: 3개
[ERROR]: 1개
[WARNING]: 1개
가장 많이 나타나는 단어:
1. 프로그램: 1회
2. 사용자: 1회
3. 파일을: 1회
```

**채점 기준**
- 로그 파일 읽기 기능 (8점)
- 키워드 검색 기능 (10점)
- 로그 통계 기능 (10점)
- 예외 처리 (2점)

---

### 문제 4: 설정 관리자 (25점)

**문제 설명**
key=value 형식의 설정 파일을 읽고 쓰는 프로그램을 작성하세요.

**요구사항**
1. ConfigManager 클래스 작성
   - 필드: `HashMap<String, String> config`, `String filename`
   - 생성자: 파일명을 받아서 설정 파일 로드
   - `loadConfig()`: 파일에서 설정 읽기 (key=value 형식)
   - `saveConfig()`: 설정을 파일에 저장
   - `get(String key)`: 설정 값 가져오기
   - `set(String key, String value)`: 설정 값 설정하기
   - `printAll()`: 모든 설정 출력

2. 설정 파일 형식
   ```
   # 설정 파일
   server=localhost
   port=8080
   database=mydb
   username=admin
   password=1234
   ```

3. 메뉴 시스템
   ```
   === 설정 관리자 ===
   1. 설정 조회
   2. 설정 추가/수정
   3. 설정 삭제
   4. 파일 저장
   5. 종료
   선택 > 
   ```

4. 기능 구현
   - **1. 설정 조회**: 모든 설정 또는 특정 키의 설정 값 출력
   - **2. 설정 추가/수정**: 키와 값을 입력받아 설정 추가 또는 수정
   - **3. 설정 삭제**: 키를 입력받아 해당 설정 삭제
   - **4. 파일 저장**: 현재 설정을 파일에 저장
   - **5. 종료**: 프로그램 종료

**실행 결과 예시**
```
=== 설정 관리자 ===
1. 설정 조회
2. 설정 추가/수정
3. 설정 삭제
4. 파일 저장
5. 종료
선택 > 1
=== 현재 설정 ===
server = localhost
port = 8080
database = mydb

선택 > 2
키 입력: port
값 입력: 9090
설정이 수정되었습니다.

선택 > 4
파일 저장 완료!
```

**채점 기준**
- ConfigManager 클래스 구현 (10점)
- 설정 읽기/쓰기 기능 (8점)
- 설정 조회/추가/수정/삭제 기능 (5점)
- 예외 처리 (2점)

---

### 문제 5: 파일 백업 프로그램 (20점)

**문제 설명**
파일을 백업 폴더에 복사하는 프로그램을 작성하세요.

**요구사항**
1. 메뉴 시스템
   ```
   === 파일 백업 프로그램 ===
   1. 파일 백업
   2. 백업 목록 보기
   3. 백업 복원
   4. 종료
   선택 > 
   ```

2. 기능 구현
   - **1. 파일 백업**: 
     - 원본 파일 경로 입력받기
     - 백업 폴더("backup") 생성 (없으면 생성)
     - 파일명에 타임스탬프 추가하여 백업 (예: "data_20240101_120000.txt")
     - 백업 정보를 "backup_list.txt"에 기록 (형식: "원본경로|백업경로|날짜")
   - **2. 백업 목록 보기**: backup_list.txt 파일을 읽어서 모든 백업 정보 출력
   - **3. 백업 복원**: 백업 목록에서 선택하여 원본 파일로 복원
   - **4. 종료**: 프로그램 종료

3. 백업 정보 파일 형식 (backup_list.txt)
   ```
   data.txt|backup/data_20240101_120000.txt|2024-01-01 12:00:00
   config.txt|backup/config_20240101_130000.txt|2024-01-01 13:00:00
   ```

**실행 결과 예시**
```
=== 파일 백업 프로그램 ===
1. 파일 백업
2. 백업 목록 보기
3. 백업 복원
4. 종료
선택 > 1
백업할 파일 경로 입력: data.txt
백업 완료: backup/data_20240101_120000.txt

선택 > 2
=== 백업 목록 ===
1. data.txt → backup/data_20240101_120000.txt (2024-01-01 12:00:00)
2. config.txt → backup/config_20240101_130000.txt (2024-01-01 13:00:00)

선택 > 3
복원할 백업 번호 입력: 1
파일 복원 완료: data.txt
```

**채점 기준**
- 파일 백업 기능 (8점)
- 백업 목록 보기 기능 (5점)
- 백업 복원 기능 (5점)
- 예외 처리 (2점)

---

### 문제 6: 통합 문제 - 회원 관리 시스템 (파일 입출력 포함) (30점)

**문제 설명**
회원 정보를 관리하는 프로그램을 작성하세요. 모든 데이터는 파일에 저장되고 프로그램 시작 시 자동으로 로드됩니다.

**요구사항**
1. Member 클래스 작성
   - 필드: `id` (String), `name` (String), `email` (String), `phone` (String)
   - 생성자, getter, setter
   - `toFileString()`: "id|name|email|phone" 형식
   - `static Member fromFileString(String line)`: 파일 문자열로 객체 생성

2. MemberManager 클래스 작성
   - 필드: `ArrayList<Member> members`, `String filename` ("members.txt")
   - 생성자: 파일에서 데이터 로드
   - `loadFromFile()`: 파일에서 회원 정보 읽기
   - `saveToFile()`: 모든 회원 정보를 파일에 저장
   - `addMember()`: 회원 추가 (중복 ID 체크)
   - `findMember()`: ID로 회원 찾기
   - `updateMember()`: 회원 정보 수정
   - `deleteMember()`: 회원 삭제
   - `printAll()`: 전체 회원 출력

3. 메뉴 시스템
   ```
   === 회원 관리 시스템 ===
   1. 회원 등록
   2. 회원 조회
   3. 회원 수정
   4. 회원 삭제
   5. 전체 조회
   6. 파일 저장
   7. 종료
   선택 > 
   ```

**실행 결과 예시**
```
=== 회원 관리 시스템 ===
1. 회원 등록
2. 회원 조회
3. 회원 수정
4. 회원 삭제
5. 전체 조회
6. 파일 저장
7. 종료
선택 > 1
ID 입력: M001
이름 입력: 홍길동
이메일 입력: hong@example.com
전화번호 입력: 010-1234-5678
회원이 등록되었습니다.

선택 > 5
=== 전체 회원 목록 ===
1. ID: M001, 이름: 홍길동, 이메일: hong@example.com, 전화: 010-1234-5678

선택 > 6
파일 저장 완료!
```

**채점 기준**
- Member 클래스 구현 (5점)
- 파일 입출력 기능 (10점)
- CRUD 기능 구현 (10점)
- 메뉴 시스템 (3점)
- 예외 처리 (2점)

---

### 문제 7: 텍스트 파일 통계 및 변환 프로그램 (25점)

**문제 설명**
텍스트 파일을 읽어서 통계를 내고, 처리된 결과를 `c:/Users/TJ/out1.txt` 파일에 저장하는 프로그램을 작성하세요.

**요구사항**
1. 메뉴 시스템
   ```
   === 텍스트 파일 처리 프로그램 ===
   1. 파일 읽기 및 통계 출력
   2. 대문자로 변환하여 저장
   3. 소문자로 변환하여 저장
   4. 단어 개수 세기 및 저장
   5. 종료
   선택 > 
   ```

2. 기능 구현
   - **1. 파일 읽기 및 통계 출력**: 
     - 파일 경로를 입력받아 파일 읽기
     - 다음 통계 정보 출력:
       - 전체 라인 수
       - 전체 문자 수 (공백 포함)
       - 전체 단어 수
       - 전체 문자 수 (공백 제외)
   - **2. 대문자로 변환하여 저장**: 
     - 파일 내용을 모두 대문자로 변환하여 `c:/Users/TJ/out1.txt`에 저장
     - 변환 완료 메시지 출력
   - **3. 소문자로 변환하여 저장**: 
     - 파일 내용을 모두 소문자로 변환하여 `c:/Users/TJ/out1.txt`에 저장
     - 변환 완료 메시지 출력
   - **4. 단어 개수 세기 및 저장**: 
     - 파일에서 각 단어의 출현 횟수를 계산
     - 단어와 개수를 "단어: 개수" 형식으로 `c:/Users/TJ/out1.txt`에 저장
     - 빈도순으로 정렬하여 저장 (많은 순서대로)
   - **5. 종료**: 프로그램 종료

3. 입력 파일 예시 (input.txt)
   ```
   Hello World
   Java Programming
   File Input Output
   Hello Java
   ```

**실행 결과 예시**
```
=== 텍스트 파일 처리 프로그램 ===
1. 파일 읽기 및 통계 출력
2. 대문자로 변환하여 저장
3. 소문자로 변환하여 저장
4. 단어 개수 세기 및 저장
5. 종료
선택 > 1
파일 경로 입력: input.txt
=== 파일 통계 ===
전체 라인 수: 4
전체 문자 수 (공백 포함): 52
전체 문자 수 (공백 제외): 44
전체 단어 수: 8

선택 > 2
파일 경로 입력: input.txt
대문자로 변환하여 c:/Users/TJ/out1.txt에 저장 완료!

선택 > 4
파일 경로 입력: input.txt
단어 개수 통계를 c:/Users/TJ/out1.txt에 저장 완료!
```

**out1.txt 파일 내용 예시 (대문자 변환)**
```
HELLO WORLD
JAVA PROGRAMMING
FILE INPUT OUTPUT
HELLO JAVA
```

**out1.txt 파일 내용 예시 (단어 개수)**
```
Hello: 2
Java: 2
World: 1
Programming: 1
File: 1
Input: 1
Output: 1
```

**채점 기준**
- 파일 읽기 및 통계 기능 (8점)
- 대문자/소문자 변환 및 저장 기능 (6점)
- 단어 개수 세기 및 저장 기능 (8점)
- 예외 처리 (3점)

---

### 문제 8: 파일 필터링 및 결과 저장 프로그램 (30점)

**문제 설명**
텍스트 파일을 읽어서 조건에 따라 필터링하고, 결과를 `c:/Users/TJ/out1.txt` 파일에 저장하는 프로그램을 작성하세요.

**요구사항**
1. 메뉴 시스템
   ```
   === 파일 필터링 프로그램 ===
   1. 파일 읽기
   2. 특정 단어 포함 라인만 저장
   3. 특정 단어 제외 라인만 저장
   4. 라인 길이로 필터링하여 저장
   5. 중복 라인 제거하여 저장
   6. 종료
   선택 > 
   ```

2. 기능 구현
   - **1. 파일 읽기**: 파일 경로를 입력받아 파일 내용을 읽고 출력
   - **2. 특정 단어 포함 라인만 저장**: 
     - 키워드를 입력받아 해당 키워드가 포함된 라인만 `c:/Users/TJ/out1.txt`에 저장
   - **3. 특정 단어 제외 라인만 저장**: 
     - 키워드를 입력받아 해당 키워드가 포함되지 않은 라인만 `c:/Users/TJ/out1.txt`에 저장
   - **4. 라인 길이로 필터링하여 저장**: 
     - 최소 길이와 최대 길이를 입력받아 해당 길이 범위의 라인만 `c:/Users/TJ/out1.txt`에 저장
   - **5. 중복 라인 제거하여 저장**: 
     - 중복된 라인을 제거하고 유일한 라인만 `c:/Users/TJ/out1.txt`에 저장
   - **6. 종료**: 프로그램 종료

3. 입력 파일 예시 (data.txt)
   ```
   Java Programming
   Python Programming
   Java Script
   C++ Programming
   Java Programming
   Web Development
   ```

**실행 결과 예시**
```
=== 파일 필터링 프로그램 ===
1. 파일 읽기
2. 특정 단어 포함 라인만 저장
3. 특정 단어 제외 라인만 저장
4. 라인 길이로 필터링하여 저장
5. 중복 라인 제거하여 저장
6. 종료
선택 > 1
파일 경로 입력: data.txt
=== 파일 내용 ===
Java Programming
Python Programming
Java Script
C++ Programming
Java Programming
Web Development

선택 > 2
파일 경로 입력: data.txt
검색할 키워드 입력: Java
Java가 포함된 라인을 c:/Users/TJ/out1.txt에 저장 완료!

선택 > 5
파일 경로 입력: data.txt
중복 라인 제거하여 c:/Users/TJ/out1.txt에 저장 완료!
```

**out1.txt 파일 내용 예시 (Java 포함)**
```
Java Programming
Java Script
Java Programming
```

**out1.txt 파일 내용 예시 (중복 제거)**
```
Java Programming
Python Programming
Java Script
C++ Programming
Web Development
```

**채점 기준**
- 파일 읽기 기능 (5점)
- 단어 포함/제외 필터링 기능 (8점)
- 라인 길이 필터링 기능 (6점)
- 중복 제거 기능 (8점)
- 예외 처리 (3점)

---

## 9. 요약

### 핵심 개념
1. **스트림**: 데이터가 흐르는 통로
2. **바이트 스트림**: 바이너리 데이터 처리
3. **문자 스트림**: 텍스트 데이터 처리
4. **버퍼**: 성능 향상을 위한 임시 저장소

### 권장 사항
1. **텍스트 파일**: `BufferedReader` + `FileReader` / `BufferedWriter` + `FileWriter`
2. **바이너리 파일**: `BufferedInputStream` + `FileInputStream` / `BufferedOutputStream` + `FileOutputStream`
3. **리소스 관리**: 항상 `try-with-resources` 사용
4. **예외 처리**: `IOException` 반드시 처리

### 자주 사용하는 클래스
- `File`: 파일 정보 및 관리
- `FileReader` / `FileWriter`: 문자 스트림
- `BufferedReader` / `BufferedWriter`: 버퍼를 사용한 문자 스트림
- `FileInputStream` / `FileOutputStream`: 바이트 스트림
- `Scanner`: 표준 입력 (키보드)
